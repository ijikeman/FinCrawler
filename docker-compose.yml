version: '3'
services:
  web:
    build: ./dockerfile/web
    ports:
      - "3000:3000"
    volumes:
      - .:/FinCrawler
    depends_on:
      - db
      - mail
    tty: true
    deploy:
      mode: global
      replicas: 1
      placement:
        constraints:
          - node.role == worker
      update_config: parallelism
  db:
    image: harisekhon/hbase:latest
    deploy:
      mode: global
      replicas: 1
      placement:
        constraints:
          - node.role == worker
      update_config: parallelism
  mail:
    image: tozd/postfix:latest
    deploy:
      mode: global
      replicas: 1
      placement:
        constraints:
          - node.role == worker
      update_config: parallelism